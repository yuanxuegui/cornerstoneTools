
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Tool Data Â· cornerstone-tools</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-versions/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-theme-cornerstone/cornerstone.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    
    <link rel="prev" href="stack-tools.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                



<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../installation.html">
            
                <a href="../installation.html">
            
                    
                    Installation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" >
            
                <span>
            
                    
                    Essentials
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="getting-started.html">
            
                <a href="getting-started.html">
            
                    
                    Getting Started
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="input-sources.html">
            
                <a href="input-sources.html">
            
                    
                    Input Sources
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="tool-states.html">
            
                <a href="tool-states.html">
            
                    
                    Tool States
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="image-tools.html">
            
                <a href="image-tools.html">
            
                    
                    Image Tools
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5" data-path="stack-tools.html">
            
                <a href="stack-tools.html">
            
                    
                    Stack Tools
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.3.6" data-path="tool-data.html">
            
                <a href="tool-data.html">
            
                    
                    Tool Data
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" >
            
                <span>
            
                    
                    Advanced
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../advanced/layered-image-stacks.html">
            
                <a href="../advanced/layered-image-stacks.html">
            
                    
                    Layered Image Stacks
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" >
            
                <span>
            
                    
                    Custom Tools
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../custom-tools/anatomy-of-a-tool.html">
            
                <a href="../custom-tools/anatomy-of-a-tool.html">
            
                    
                    Anatomy of a Tool
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="../custom-tools/simple-tools.html">
            
                <a href="../custom-tools/simple-tools.html">
            
                    
                    Simple Tools
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" >
            
                <span>
            
                    
                    API Reference
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../api.md">
            
                <span>
            
                    
                    Generated API Docs
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" >
            
                <span>
            
                    
                    Guides
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="../guides/migrating-major-versions.html">
            
                <a href="../guides/migrating-major-versions.html">
            
                    
                    Migrating Major Versions
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../contributing.html">
            
                <a href="../contributing.html">
            
                    
                    Contributing
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>



                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
  
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Tool Data</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="tool-data">Tool Data</h1>
<blockquote>
<p>This is an in-progress page. Please feel free to make suggestions or add content either directly with a pull request or in a new GitHub issue.</p>
</blockquote>
<p>Tools often have data associated with them. For the most part, this data is managed for you, but it can be helpful to understand how to view and modify that data. Tool data has several traits:</p>
<ul>
<li><code>Element</code></li>
<li><code>ToolType</code></li>
<li><code>StateManager (Scope)</code></li>
</ul>
<p>Most tools, when they create data... [[todo]]</p>
<h2 id="data-events">Data Events</h2>
<p>[[todo]]</p>
<p><em>Universal</em></p>
<ul>
<li>Added: <code>cornerstonetoolsmeasurementadded</code></li>
<li>Modified: <code>cornerstonetoolsmeasurementmodified</code></li>
<li>Removed: <code>cornerstonemeasurementremoved</code></li>
<li>Deactivated: <code>cornerstonetoolstooldeactivated</code></li>
</ul>
<p><em>Specific</em></p>
<ul>
<li><code>cornerstonetoolsclipstopped</code></li>
<li><code>cornerstonestackscroll</code></li>
</ul>
<h2 id="data-api">Data API</h2>
<p><strong>addToolState</strong> is <em>mostly</em> used internally by tools, or to restore a saved state. The most common API use case for this is to set the intial state when using the &quot;Stack State Manager&quot;</p>
<p><code>cornerstoneTools.addToolState(element, toolType, data)</code></p>
<p><strong>getToolState</strong> is much more useful [[todo]]</p>
<p><code>cornerstoneTools.getToolState(element, toolType)</code></p>
<h2 id="data-context-scope">Data Context (Scope)</h2>
<p>The bulk of code around consistently managing tool properties, data, and state live in the <a href="https://github.com/cornerstonejs/cornerstoneTools/tree/master/src/stateManagement" target="_blank">/src/stateManagement</a> folder. We&apos;ve already touched on <code>addToolState</code> and <code>getToolState</code>, but we&apos;re going to take a closer look at <em>what happens</em> when we use those methods:</p>
<ul>
<li>Where is the tool state data stored?</li>
<li>How do multiple enabled elements share tool data?</li>
<li>When would I want tool data to be shared with more than the original image it was created on?</li>
</ul>
<h3 id="state-managers">State Managers</h3>
<p>To work with <code>addToolState</code> and <code>getToolState</code>, each State Manager must implement the below interface <em>at a minimum</em>.</p>
<p><em>Interface:</em></p>
<ul>
<li><code>add(element, toolType, data)</code></li>
<li><code>get(element, toolType)</code></li>
<li>Should expose a method to call <code>setElementToolStateManager(element, toolStateManager)</code></li>
</ul>
<p><strong>Image Id Specific State Manager</strong> (Default)</p>
<p>This is the default context for most tools. If you attempt to <code>addToolState</code>/<code>getToolState</code> for a tool and you haven&apos;t set a different &quot;State Manager&quot;, then <a href="https://github.com/cornerstonejs/cornerstoneTools/blob/master/src/stateManagement/toolState.js#L11-L13" target="_blank">it is assumed</a> you want to set/get specific to the image&apos;s ID. For example, if you activate and use the length tool to measure part of an image:</p>
<p><code>cornerstoneTools.length.activate(element, 1)</code></p>
<p>Then any other enabled element with the length tool also activated will display the length tool&apos;s data on it&apos;s next render.</p>
<p><strong>Stack State Manager</strong></p>
<p>A Stack specific tool state management strategy. This means that tool data is shared between all imageIds in a given stack.</p>
<ul>
<li><code>cornerstoneTools.addStackStateManager(element, otherTools)</code></li>
</ul>
<p>Here is a common use case for <code>addStackStateManager</code>:</p>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> exampleStack = {
  currentImageIdIndex : <span class="hljs-number">0</span>,
  imageIds: [
    <span class="hljs-string">&apos;example://1&apos;</span>,
    <span class="hljs-string">&apos;example://2&apos;</span>
  ]
};

cornerstoneTools.addStackStateManager(enabledElement, [<span class="hljs-string">&apos;stack&apos;</span>])
cornerstoneTools.addToolState(enabledElement, <span class="hljs-string">&apos;stack&apos;</span>, exampleStack);
</code></pre>
<p>In the above snippet, we add the &quot;stackStateManager&quot; for the <code>enabledElement</code> for the <code>stack</code> tool.</p>
<p><strong>Frame of Reference State Manager</strong></p>
<p>A frame-of-reference specific tool state management strategy.  This means that measurement data are tied to a specific frame of reference UID and only visible to objects using that frame-of-reference UID.</p>
<blockquote>
<p><em>Needs example</em></p>
</blockquote>
<p><strong>Time Series State Manager</strong></p>
<ul>
<li><em>Time Series Tool</em> ( <a href="https://github.com/cornerstonejs/cornerstoneTools/blob/29182180ed3f850ba41c609b98b96464affca5f0/examples/timeSeries/index.html" target="_blank">Example</a> | <a href="https://github.com/cornerstonejs/cornerstoneTools/blob/29182180ed3f850ba41c609b98b96464affca5f0/examples/timeSeries/index.html#L141" target="_blank">Source</a> )</li>
</ul>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                

            </div>

            
                
                <a href="stack-tools.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page: Stack Tools">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Tool Data","level":"1.3.6","depth":2,"next":{"title":"Advanced","level":"1.4","depth":1,"ref":"","articles":[{"title":"Layered Image Stacks","level":"1.4.1","depth":2,"path":"advanced/layered-image-stacks.md","ref":"advanced/layered-image-stacks.md","articles":[]}]},"previous":{"title":"Stack Tools","level":"1.3.5","depth":2,"path":"essentials/stack-tools.md","ref":"essentials/stack-tools.md","articles":[]},"dir":"ltr"},"config":{"plugins":["edit-link","theme-cornerstone","-fontsettings","github","ga","sitemap","versions"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"github":{"url":"https://github.com/cornerstonejs/cornerstoneTools"},"search":{},"theme-cornerstone":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"highlight":{},"sitemap":{"hostname":"https://tools.cornerstonejs.org/history/v2"},"ga":{"configuration":"auto","token":"UA-110573590-1"},"versions":{"type":"branches","gitbookConfigURL":"https://raw.githubusercontent.com/cornerstonejs/cornerstoneTools/master/docs/book.json","options":[{"value":"https://tools.cornerstonejs.org/history/v2/","text":"Version 2.x","selected":true},{"value":"https://tools.cornerstonejs.org/","text":"Version 3.x"}]},"sharing":{"facebook":false,"twitter":false,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"edit-link":{"label":"Edit This Page","base":"https://github.com/cornerstonejs/cornerstoneTools/edit/master/docs/v2"},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"cornerstone-tools","links":{"sharing":{"facebook":false,"twitter":false}},"gitbook":">3.0.0"},"file":{"path":"essentials/tool-data.md","mtime":"2019-03-24T03:37:36.000Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2019-03-24T03:42:24.804Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-edit-link/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-github/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-ga/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-versions/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    

    </body>
</html>

